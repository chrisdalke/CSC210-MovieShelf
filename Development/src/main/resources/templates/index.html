<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.w3.org/1999/xhtml">
    <head th:include="fragments/header :: header">
    </head>
    <body>
        <!-- Include the landing page background image fragment for unauthorized user -->
        <div th:include="fragments/landing-bg :: landing-bg" sec:authorize="isAnonymous()"></div>

        <div class="uk-offcanvas-content uk-light">
            <!-- Include container for ladning page particle effects -->
            <div id="particles-js-index"></div>

            <!-- Include the nav fragment -->
            <div th:include="fragments/nav :: nav"></div>

            <!-- Include the sidebar fragment if the user is logged in -->
            <div th:include="fragments/sidebar :: sidebar" sec:authorize="isAuthenticated()"></div>

            <!-- Landing Page for a not-logged-in user -->
            <div class="uk-padding" sec:authorize="isAnonymous()">
                <h1>Index Page</h1>

                <h2>Not Logged In</h2>
                <h3>Todo: Display a landing page here</h3>
            </div>

            <!-- Landing page for a logged-in user -->
            <div id="main-with-sidebar" class="uk-padding" sec:authorize="isAuthenticated()">
                <h2>Hello, <span th:text="${userProfile.getDisplayName()}">null</span>!</h2>
                <hr>
                <h4>My Shelf</h4>
                <p>Add some movies to your shelf to start finding suggestions.</p>
                <p>Examples: tt1375666 - Inception<br>tt0816692 - Interstellar<br>tt3659388 - The Martian</p>

                <form th:action="@{/shelf/addMovie}" th:object="${String}" method="post">
                    <fieldset class="uk-fieldset">
                        <div class="uk-margin">
                            <input class="uk-input" type="text" name="titleId" id="titleId" placeholder="Title ID"/>
                        </div>
                        <div class="uk-margin">
                            <input class="uk-width-1-1 uk-button uk-button-default" type="submit" value="Add Movie"/>
                        </div>
                    </fieldset>
                </form>

                <p>Your movie list:</p>
                <table class="table table-bordered">
                    <tr th:each="title : ${userData.getTitles()}" th:object="${title}">
                        <td>
                            <span th:text="${title.getTitleName()}"></span>
                            <a th:href="'/shelf/removeMovie/'+${title.getTitleId()}">(Remove)</a>
                        </td>
                    </tr>
                </table>
            </div>

            <!-- Include the footer fragment -->
            <div th:include="fragments/footer :: footer"></div>

            <script sec:authorize="isAnonymous()" src="/js/particles.min.js"></script>
            <script sec:authorize="isAnonymous()" src="/js/particles-index.js"></script>
        </div>
    </body>
</html>
